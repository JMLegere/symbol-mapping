Coding instructions:
- Run `ruff check src tests` to lint code.
- Check CI for linting tests to run and make sure they pass.
- Simplify and refactor any touched functions where possible.
